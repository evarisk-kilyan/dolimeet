window.dolimeet||(window.dolimeet={},window.dolimeet.scriptsLoaded=!1),window.dolimeet.scriptsLoaded||(window.dolimeet.init=function(){window.dolimeet.load_list_script()},window.dolimeet.load_list_script=function(){if(!window.dolimeet.scriptsLoaded){let e=void 0,t=void 0;for(e in window.dolimeet)for(t in window.dolimeet[e].init&&window.dolimeet[e].init(),window.dolimeet[e])window.dolimeet[e]&&window.dolimeet[e][t]&&window.dolimeet[e][t].init&&window.dolimeet[e][t].init();window.dolimeet.scriptsLoaded=!0}},window.dolimeet.refresh=function(){let e=void 0,t=void 0;for(e in window.dolimeet)for(t in window.dolimeet[e].refresh&&window.dolimeet[e].refresh(),window.dolimeet[e])window.dolimeet[e]&&window.dolimeet[e][t]&&window.dolimeet[e][t].refresh&&window.dolimeet[e][t].refresh()},$(document).ready(window.dolimeet.init)),window.dolimeet.session={},window.dolimeet.session.init=function(){window.dolimeet.session.event()},window.dolimeet.session.event=function(){$(document).on("change","#fk_soc",window.dolimeet.session.reloadField),$(document).on("change","#model",window.dolimeet.session.reloadFieldModel),$(document).on("change","#element_type",window.dolimeet.session.reloadFieldElementType),$("#date_start, #date_starthour, #date_startmin, #date_end, #date_endhour, #date_endmin").change(function(){setTimeout(function(){window.dolimeet.session.getDiffTimestamp()},100)})},window.dolimeet.session.reloadField=function(){var e=document.getElementById("session_form"),e=new FormData(e),t=window.saturne.toolbox.getToken(),o=window.saturne.toolbox.getQuerySeparator(document.URL);let i=e.get("fk_soc"),n=(-1==i&&(i=0),"");document.URL.match("action=")||("add"==(e=e.get("action"))?n="&action=create":"update"==e&&(n="&action=edit")),$.ajax({url:document.URL+o+"fk_soc="+i+"&token="+t+n,type:"POST",processData:!1,contentType:!1,success:function(e){$(".field_fk_project").replaceWith($(e).find(".field_fk_project")),$(".field_fk_contrat").replaceWith($(e).find(".field_fk_contrat"))},error:function(){}})},window.dolimeet.session.reloadFieldModel=function(){var e=window.saturne.toolbox.getToken(),t=window.saturne.toolbox.getQuerySeparator(document.URL),o=this.checked?"on":"off";$.ajax({url:document.URL+t+"model="+o+"&token="+e,type:"POST",processData:!1,contentType:!1,success:function(e){$(".fiche").replaceWith($(e).find(".fiche"))},error:function(){}})},window.dolimeet.session.reloadFieldElementType=function(){var e=window.saturne.toolbox.getToken(),t=window.saturne.toolbox.getQuerySeparator(document.URL),o=$(this).val(),i=$("#model").is(":checked")?"on":"off";window.saturne.loader.display($(".field_element_type")),window.saturne.loader.display($(".field_fk_element")),$.ajax({url:document.URL+t+"model="+i+"&element_type="+o+"&token="+e,type:"POST",processData:!1,contentType:!1,success:function(e){$(".field_element_type").replaceWith($(e).find(".field_element_type")),$(".field_fk_element").replaceWith($(e).find(".field_fk_element"))},error:function(){}})},window.dolimeet.session.getDiffTimestamp=function(){var e=$("#date_startday").val(),t=$("#date_startmonth").val(),o=$("#date_startyear").val(),i=0<$("#date_starthour").val()?$("#date_starthour").val():0,n=0<$("#date_startmin").val()?$("#date_startmin").val():0,d=$("#date_endday").val(),a=$("#date_endmonth").val(),l=$("#date_endyear").val(),r=0<$("#date_endhour").val()?$("#date_endhour").val():0,s=0<$("#date_endmin").val()?$("#date_endmin").val():0;""!==o&&""!==t&&""!==e&&""!==l&&""!==a&&""!==d&&(o=new Date(o,t-1,e,i,n),e=((t=new Date(l,a-1,d,r,s)).getTime()-o.getTime())/36e5,i=(t.getTime()-o.getTime())/6e4,0<e?($('input[name="durationhour"]').val((i-i%60)/60),$('input[name="durationmin"]').val(Math.abs(i%60))):($('input[name="durationhour"]').val(0),$('input[name="durationmin"]').val(0)))};